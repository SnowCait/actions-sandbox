name: Concurrency

on:
  push:
    paths:
      - .github/workflows/concurrency.yml
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-20.04

    steps:
      - name: Control concurrency
        run: gh run list --workflow ${WORKFLOW}
        env:
          GH_TOKEN: ${{ github.token }}
          GH_REPO: ${{ github.repository }}
          WORKFLOW: ${{ github.workflow }}

      - name: Sleep 10 minutes
        run: sleep 600
