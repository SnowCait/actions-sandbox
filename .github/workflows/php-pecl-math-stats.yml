name: php/pecl-math-stats

on:
  push:
    paths:
      - .github/workflows/php-pecl-math-stats.yml

jobs:
  build:
    runs-on: ubuntu-20.04

    steps:
    - uses: actions/checkout@v2
      with:
        repository: php/pecl-math-stats
#         ref: 2.0.3
    - run: git log -5
    - run: ls -la

    - run: phpize --version
    - run: phpize --help

    - run: phpize
    - name: diff
      run: |
        git add -N .
        git diff --name-only

    - run: ./configure --help
    - run: ./configure
    - name: diff
      run: |
        git add -N .
        git diff --name-only
    - run: cat Makefile

    - run: make DESTDIR=~/output
    - name: diff
      run: |
        git add -N .
        git diff --name-only

    - run: mkdir -p ~/output
    - run: make install DESTDIR=~/output
    - name: diff
      run: |
        git add -N .
        git diff --name-only
