name: Icon

on:
  push:
    paths:
      - .github/workflows/icon.yml

  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    env:
      FILE: Twitter_Logo_Blue.png

    steps:
      - uses: actions/checkout@v2

      # Info
      - run: identify -version
      - run: magick -version
      - run: magick identify $FILE
      - run: identify $FILE
      - run: identify -format '%m %r' $FILE
      - run: identify $FILE | cut -f 2,6 -d ' '
      - run: identify -verbose $FILE
      - run: file $FILE

      # Validate
      - run: test "$(identify $FILE | cut -f 2,6 -d ' ')" = "PNG sRGB"
